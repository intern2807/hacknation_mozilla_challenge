<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Research Pipeline â€” Web Agent API</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../shared/styles.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body class="demo-bg-glow">
  <main class="page-container">
    <header class="demo-header">
      <div class="header-badge">
        <span class="dot"></span>
        <span>Multi-Agent Demo</span>
      </div>
      <h1 class="demo-title demo-text-gradient">Research Pipeline</h1>
      <p class="demo-subtitle">Four agents collaborate: Orchestrator coordinates, Searcher queries Google, Reader extracts content, and Writer synthesizes findings.</p>
    </header>

    <!-- Input Section -->
    <section class="demo-card">
      <div class="demo-card-header">
        <div class="demo-card-icon">ğŸ”¬</div>
        <div>
          <div class="demo-card-title">Research Topic</div>
          <p class="demo-text-sm">Enter a topic to research using browser control.</p>
        </div>
      </div>
      <div class="input-row">
        <input 
          type="text" 
          id="topic-input" 
          class="demo-input topic-input"
          placeholder="Enter a research topic (e.g., 'Benefits of green tea')"
        >
        <button class="demo-btn demo-btn-primary start-btn" id="start-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="5 3 19 12 5 21 5 3"/>
          </svg>
          Start Research
        </button>
      </div>
    </section>

    <!-- API Status -->
    <div class="api-status" id="api-status">
      <span class="status-dot"></span>
      <span class="status-text">Checking API...</span>
    </div>

    <!-- Sequence Diagram -->
    <section class="demo-card sequence-card">
      <div class="demo-card-header">
        <div class="demo-card-icon">ğŸ“Š</div>
        <div>
          <div class="demo-card-title">Agent Collaboration</div>
          <p class="demo-text-sm">Watch the agents work together in real-time.</p>
        </div>
      </div>

      <!-- Agent Columns Header -->
      <div class="sequence-header">
        <div class="agent-column" data-agent="orchestrator">
          <div class="agent-head">
            <div class="agent-icon orchestrator">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="3"/>
                <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/>
              </svg>
            </div>
            <div class="agent-label">Orchestrator</div>
          </div>
        </div>
        <div class="agent-column" data-agent="searcher">
          <div class="agent-head">
            <div class="agent-icon searcher">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.35-4.35"/>
              </svg>
            </div>
            <div class="agent-label">Searcher</div>
          </div>
        </div>
        <div class="agent-column" data-agent="reader">
          <div class="agent-head">
            <div class="agent-icon reader">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
              </svg>
            </div>
            <div class="agent-label">Reader</div>
          </div>
        </div>
        <div class="agent-column" data-agent="writer">
          <div class="agent-head">
            <div class="agent-icon writer">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                <path d="M2 2l7.586 7.586"/>
              </svg>
            </div>
            <div class="agent-label">Writer</div>
          </div>
        </div>
      </div>

      <!-- Sequence Timeline -->
      <div class="sequence-body" id="sequence-body">
        <!-- Lifelines -->
        <div class="lifelines">
          <div class="lifeline" data-agent="orchestrator"></div>
          <div class="lifeline" data-agent="searcher"></div>
          <div class="lifeline" data-agent="reader"></div>
          <div class="lifeline" data-agent="writer"></div>
        </div>

        <!-- Messages will be added here dynamically -->
        <div class="messages" id="messages">
          <div class="empty-state" id="empty-state">
            <p>Enter a topic and click "Start Research" to see the agents collaborate.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Output Section -->
    <section class="demo-card output-section" id="output-section" style="display: none;">
      <div class="demo-card-header">
        <div class="demo-card-icon">ğŸ“</div>
        <div>
          <div class="demo-card-title" id="output-title">Research Results</div>
          <div class="output-meta">
            <span id="output-sources">0 sources</span>
            <span class="meta-sep">Â·</span>
            <span id="output-words">0 words</span>
            <span class="meta-sep">Â·</span>
            <span id="output-time">0s</span>
          </div>
        </div>
      </div>
      <div class="output-body" id="output-body"></div>
    </section>

    <section class="demo-card">
      <div class="demo-card-header">
        <div class="demo-card-icon">ğŸ”</div>
        <div>
          <div class="demo-card-title">Requirements</div>
          <p class="demo-text-sm">Required for this demo.</p>
        </div>
      </div>
      <div class="requirements">
        <p><strong>Feature flags:</strong> <code>browserControl</code> and <code>multiAgent</code> must be enabled.</p>
        <p><strong>Permissions:</strong> <code>browser:tabs.create</code>, <code>browser:tabs.read</code>, <code>model:prompt</code></p>
      </div>
    </section>

    <footer class="demo-footer">
      <a href="../../">â† Back to Demos</a>
    </footer>
  </main>

  <script type="module" src="app.js"></script>
</body>
</html>
